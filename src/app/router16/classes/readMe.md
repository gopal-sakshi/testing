https://www.intertech.com/angular-development-10-routereusestrategy-maintaining-component-state/
this is some 11 part series on Angular... Do READDDDDD


MUST READ


MUST READ
------------------------------------------------------------------------------------------------------------------------------
# ERROR 01

class-is-using-angular-features-but-is-not-decorated-please-add-an-explicit-ang

`sol 1: `

added this to master.component.ts ----> this is an abstract class
@Component({
	template:``
})
- Component requires you to specify template or templateUrl, which cannot be used with an abstract class.
- Hence, we will use @Directive instead


`sol 2: `
if its abstract class using @Input()
- use @Injectable()


`sol 3: `
may be we can even use @Directive decorator

# ERROR 02

<routerLink> is not known angular feature
- import RouterModule
- sometimes, the component in which routerLink is used may be absent in declarations array


# ERROR 03

------------------------------------------------------------------------------------------------------------------------------
it seems, we used abstract class - MasterComponent
- abstract classes cant be initialised
- so, there is no need for template, styles ???
- just look into it

2 designs
- parent-child
    contents of the master page stay on screen when viewing the detail.
    best used when the detail is small and can reasonably fit on the same page
    this approach places a router-outlet in the master page to display the child content: 
- searchDesign
    ???

- NOTE
    both these designs ---> use some shared functionality
        abstract class 'MasterComponent'
        'DetailComponent'   -----> this is the details 
                                        in parent child design ---> it just appears below parent component
                                        in search design ----> this component is opened & not rendered in the same page

-------------------------------------------------------------------------------------------------------------------------------
# Parent Child design

PASS – Master page is maintained 
PASS – Detail view is a unique URL 
FAIL –  Detail view initialization does not run – the random value is the same every time even when routing between different details
PARTIAL – Detail component is never cleaned up between detail views, but it is after navigating away 

Angular DefaultRouteReuseStrategy ---> shouldReuseRoute()
- The implementation returns true when the destination route has the same route configuration as the source route.  
- When going from one detail to the next this is always true 
    – only the parameter changes and the same route configuration and components are used.  
- When the shouldReuseRoute method returns true, 
    Angular will not destroy the component tree 
        by firing the ngOnInit and ngOnDestroy hooks – 
    instead the only thing that happens it the router emits new values for the route parameters and other Observables.
    Therefore, we see the `Detail ID update` but not the `random number`.

- We could easily solve the random number generation issue by 
    moving the code into the subscribe callback on the params Observable.
- This is often the best method in a detail type view to distinguish between 
    `code that creates the component` and 
    `updates its contents` when new data arrives or the route parameter changes.

shouldReuseRoute = true             <default angular behaviour>
- during this navigation
    /router16/parent/detail/:Id ----------------> `loads Detail component`
    example =====>                  /router16/parent/detail/23 ------------------>  /router16/parent/detail/44
- constructor, ngOnInit(), ngOnDestroy() of `detail component` arent called
- only path params change from 23 to 44 ----> whatever is subscribed to path params change, only that gets updated_invoked_called
- plus, the parent component remains intact
    say some data is entered in input-field by user... it remains as it is...

shouldReuseRoute = false
- whole component tree, subtree & everything gets loaded again...
- even the parent component, which is parent route of detail component will get reloaded
    ngOnInit() & ngOnDestroy() are called for parent component
    there by destroying the user experience... 
    if any data is entered in input field ---> it goes away



- When a routing event happens, it doesn’t just happen at the detail level. 
- Angular needs to review the entire component tree generated by the route. 
- When routing between siblings, the default functionality keeps the parent components intact and only rebuilds what is necessary 
    – which not only gives a mostly expected behavior but has large performance benefits as well.
- that is why in shouldReuseRoute = true
    parent component remains as it is... data entered in input field doesnt go away...

`WAY FORWARD`
- What we need is a way to direct Angular to 
    only rebuild certain components but reuse others by default. 
        reuse ---> parent component
        rebuild ---> detail component
- We want to add the default functionality back in to shouldReuseRoute and only deviate when we specifically request it. 
- We can accomplish this by using the data property on the route configuration 
    which is designed exactly for this type of extensibility to a route.
- see alwaysRefresh property on routeConfiguration
-------------------------------------------------------------------------------------------------------------------------------

# Search DESIGN


FAIL – The master page loses its context when we return to it 
PASS – Detail view is a unique URL 
PASS – Detail view initialization runs and gives a new random value 
PASS – Detail component is cleaned up between detail views

